/*
 * Copyright (C) 2011 Darren Salt
 *
 * Licensed under the Apache License, Version 2.0 (the "Licence"); you may
 * not use this file except in compliance with the Licence. You may obtain
 * a copy of the Licence at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the Licence is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * Licence for the specific language governing permissions and limitations
 * under the Licence.
 */

package com.webnation.util.keyboard;

import java.text.Normalizer;

public class DeadAccentSequence extends ComposeBase {
	private static final String TAG = "HK/DeadAccent";

	public DeadAccentSequence(ComposeSequencing user) {
		init(user);
	}

	private static void putAccent(String nonSpacing, String spacing, String ascii) {
		if (ascii == null)
			ascii = spacing;
		put("" + nonSpacing + " ", ascii);
		put(nonSpacing + nonSpacing, spacing);
		put(Keyboard.DEAD_KEY_PLACEHOLDER + nonSpacing, spacing);
	}

	public static String getSpacing(char nonSpacing) {
		String spacing = get("" + Keyboard.DEAD_KEY_PLACEHOLDER + nonSpacing);
		if (spacing == null)
			spacing = DeadAccentSequence.normalize(" " + nonSpacing);
		if (spacing == null)
			return "" + nonSpacing;
		return spacing;
	}

	static {
		// space + combining diacritical
		// cf. http://unicode.org/charts/PDF/U0300.pdf
		putAccent("\u0300", "\u02cb", "`"); // grave
		putAccent("\u0301", "\u02ca", "Â´"); // acute
		putAccent("\u0302", "\u02c6", "^"); // circumflex
		putAccent("\u0303", "\u02dc", "~"); // small tilde
		putAccent("\u0304", "\u02c9", "Â¯"); // macron
		putAccent("\u0305", "\u00af", "Â¯"); // overline
		putAccent("\u0306", "\u02d8", null); // breve
		putAccent("\u0307", "\u02d9", null); // dot above
		putAccent("\u0308", "\u00a8", "Â¨"); // diaeresis
		putAccent("\u0309", "\u02c0", null); // hook above
		putAccent("\u030a", "\u02da", "Â°"); // ring above
		putAccent("\u030b", "\u02dd", "\""); // double acute
		putAccent("\u030c", "\u02c7", null); // caron
		putAccent("\u030d", "\u02c8", null); // vertical line above
		putAccent("\u030e", "\"", "\""); // double vertical line above
		putAccent("\u0313", "\u02bc", null); // comma above
		putAccent("\u0314", "\u02bd", null); // reversed comma above

		put("\u0308\u0301\u03b9", "\u0390"); // Greek Dialytika+Tonos, iota
		put("\u0301\u0308\u03b9", "\u0390"); // Greek Dialytika+Tonos, iota
		put("\u0301\u03ca", "\u0390"); // Greek Dialytika+Tonos, iota
		put("\u0308\u0301\u03c5", "\u03b0"); // Greek Dialytika+Tonos, upsilon
		put("\u0301\u0308\u03c5", "\u03b0"); // Greek Dialytika+Tonos, upsilon
		put("\u0301\u03cb", "\u03b0"); // Greek Dialytika+Tonos, upsilon

		/*
		// include?
		        put("Ìƒ ", "~");
		        put("ÌƒÌƒ", "~");
		        put("Ì? ", "'");
		        put("Ì?Ì?", "Â´");
		        put("Ì€ ", "`");
		        put("Ì€Ì€", "`");
		        put("Ì‚ ", "^");
		        put("Ì‚Ì‚", "^");
		        put("ÌŠ ", "Â°");
		        put("ÌŠÌŠ", "Â°");
		        put("Ì„ ", "Â¯");
		        put("Ì„Ì„", "Â¯");
		        put("Ì† ", "Ë˜");
		        put("Ì†Ì†", "Ë˜");
		        put("Ì‡ ", "Ë™");
		        put("Ì‡Ì‡", "Ë™");
		        put("ÌˆÌˆ", "Â¨");
		        put("Ìˆ ", "\"");
		        put("Ì‹ ", "Ë?");
		        put("Ì‹Ì‹", "Ë?");
		        put("ÌŒ ", "Ë‡");
		        put("ÌŒÌŒ", "Ë‡");
		        put("Ì§ ", "Â¸");
		        put("Ì§Ì§", "Â¸");
		        put("Ì¨ ", "Ë›");
		        put("Ì¨Ì¨", "Ë›");
		        put("Ì‚2", "Â²");
		        put("Ì‚3", "Â³");
		        put("Ì‚1", "Â¹");
		// include end?
		        put("Ì€A", "Ã€");
		        put("Ì?A", "Ã?");
		        put("Ì‚A", "Ã‚");
		        put("ÌƒA", "Ãƒ");
		        put("ÌˆA", "Ã„");
		        put("ÌŠA", "Ã…");
		        put("Ì§C", "Ã‡");
		        put("Ì€E", "Ãˆ");
		        put("Ì?E", "Ã‰");
		        put("Ì‚E", "ÃŠ");
		        put("ÌˆE", "Ã‹");
		        put("Ì€I", "ÃŒ");
		        put("Ì?I", "Ã?");
		        put("Ì‚I", "ÃŽ");
		        put("ÌˆI", "Ã?");
		        put("ÌƒN", "Ã‘");
		        put("Ì€O", "Ã’");
		        put("Ì?O", "Ã“");
		        put("Ì‚O", "Ã”");
		        put("ÌƒO", "Ã•");
		        put("ÌˆO", "Ã–");
		        put("Ì€U", "Ã™");
		        put("Ì?U", "Ãš");
		        put("Ì‚U", "Ã›");
		        put("ÌˆU", "Ãœ");
		        put("Ì?Y", "Ã?");
		        put("Ì€a", "Ã ");
		        put("Ì?a", "Ã¡");
		        put("Ì‚a", "Ã¢");
		        put("Ìƒa", "Ã£");
		        put("Ìˆa", "Ã¤");
		        put("ÌŠa", "Ã¥");
		        put("Ì§c", "Ã§");
		        put("Ì€e", "Ã¨");
		        put("Ì?e", "Ã©");
		        put("Ì‚e", "Ãª");
		        put("Ìˆe", "Ã«");
		        put("Ì€i", "Ã¬");
		        put("Ì?i", "Ã­");
		        put("Ì‚i", "Ã®");
		        put("Ìˆi", "Ã¯");
		        put("Ìƒn", "Ã±");
		        put("Ì€o", "Ã²");
		        put("Ì?o", "Ã³");
		        put("Ì‚o", "Ã´");
		        put("Ìƒo", "Ãµ");
		        put("Ìˆo", "Ã¶");
		        put("Ì€u", "Ã¹");
		        put("Ì?u", "Ãº");
		        put("Ì‚u", "Ã»");
		        put("Ìˆu", "Ã¼");
		        put("Ì?y", "Ã½");
		        put("Ìˆy", "Ã¿");
		        put("Ì„A", "Ä€");
		        put("Ì„a", "Ä?");
		        put("Ì†A", "Ä‚");
		        put("Ì†a", "Äƒ");
		        put("Ì¨A", "Ä„");
		        put("Ì¨a", "Ä…");
		        put("Ì?C", "Ä†");
		        put("Ì?c", "Ä‡");
		        put("Ì‚C", "Äˆ");
		        put("Ì‚c", "Ä‰");
		        put("Ì‡C", "ÄŠ");
		        put("Ì‡c", "Ä‹");
		        put("ÌŒC", "ÄŒ");
		        put("ÌŒc", "Ä?");
		        put("ÌŒD", "ÄŽ");
		        put("ÌŒd", "Ä?");
		        put("Ì„E", "Ä’");
		        put("Ì„e", "Ä“");
		        put("Ì†E", "Ä”");
		        put("Ì†e", "Ä•");
		        put("Ì‡E", "Ä–");
		        put("Ì‡e", "Ä—");
		        put("Ì¨E", "Ä˜");
		        put("Ì¨e", "Ä™");
		        put("ÌŒE", "Äš");
		        put("ÌŒe", "Ä›");
		        put("Ì‚G", "Äœ");
		        put("Ì‚g", "Ä?");
		        put("Ì†G", "Äž");
		        put("Ì†g", "ÄŸ");
		        put("Ì‡G", "Ä ");
		        put("Ì‡g", "Ä¡");
		        put("Ì§G", "Ä¢");
		        put("Ì§g", "Ä£");
		        put("Ì‚H", "Ä¤");
		        put("Ì‚h", "Ä¥");
		        put("ÌƒI", "Ä¨");
		        put("Ìƒi", "Ä©");
		        put("Ì„I", "Äª");
		        put("Ì„i", "Ä«");
		        put("Ì†I", "Ä¬");
		        put("Ì†i", "Ä­");
		        put("Ì¨I", "Ä®");
		        put("Ì¨i", "Ä¯");
		        put("Ì‡I", "Ä°");
		        put("Ì‡i", "Ä±");
		        put("Ì‚J", "Ä´");
		        put("Ì‚j", "Äµ");
		        put("Ì§K", "Ä¶");
		        put("Ì§k", "Ä·");
		        put("Ì?L", "Ä¹");
		        put("Ì?l", "Äº");
		        put("Ì§L", "Ä»");
		        put("Ì§l", "Ä¼");
		        put("ÌŒL", "Ä½");
		        put("ÌŒl", "Ä¾");
		        put("Ì?N", "Åƒ");
		        put("Ì?n", "Å„");
		        put("Ì§N", "Å…");
		        put("Ì§n", "Å†");
		        put("ÌŒN", "Å‡");
		        put("ÌŒn", "Åˆ");
		        put("Ì„O", "ÅŒ");
		        put("Ì„o", "Å?");
		        put("Ì†O", "ÅŽ");
		        put("Ì†o", "Å?");
		        put("Ì‹O", "Å?");
		        put("Ì‹o", "Å‘");
		        put("Ì?R", "Å”");
		        put("Ì?r", "Å•");
		        put("Ì§R", "Å–");
		        put("Ì§r", "Å—");
		        put("ÌŒR", "Å˜");
		        put("ÌŒr", "Å™");
		        put("Ì?S", "Åš");
		        put("Ì?s", "Å›");
		        put("Ì‚S", "Åœ");
		        put("Ì‚s", "Å?");
		        put("Ì§S", "Åž");
		        put("Ì§s", "ÅŸ");
		        put("ÌŒS", "Å ");
		        put("ÌŒs", "Å¡");
		        put("Ì§T", "Å¢");
		        put("Ì§t", "Å£");
		        put("ÌŒT", "Å¤");
		        put("ÌŒt", "Å¥");
		        put("ÌƒU", "Å¨");
		        put("Ìƒu", "Å©");
		        put("Ì„U", "Åª");
		        put("Ì„u", "Å«");
		        put("Ì†U", "Å¬");
		        put("Ì†u", "Å­");
		        put("ÌŠU", "Å®");
		        put("ÌŠu", "Å¯");
		        put("Ì‹U", "Å°");
		        put("Ì‹u", "Å±");
		        put("Ì¨U", "Å²");
		        put("Ì¨u", "Å³");
		        put("Ì‚W", "Å´");
		        put("Ì‚w", "Åµ");
		        put("Ì‚Y", "Å¶");
		        put("Ì‚y", "Å·");
		        put("ÌˆY", "Å¸");
		        put("Ì?Z", "Å¹");
		        put("Ì?z", "Åº");
		        put("Ì‡Z", "Å»");
		        put("Ì‡z", "Å¼");
		        put("ÌŒZ", "Å½");
		        put("ÌŒz", "Å¾");
		        put("Ì›O", "Æ ");
		        put("Ì›o", "Æ¡");
		        put("Ì›U", "Æ¯");
		        put("Ì›u", "Æ°");
		        put("ÌŒA", "Ç?");
		        put("ÌŒa", "ÇŽ");
		        put("ÌŒI", "Ç?");
		        put("ÌŒi", "Ç?");
		        put("ÌŒO", "Ç‘");
		        put("ÌŒo", "Ç’");
		        put("ÌŒU", "Ç“");
		        put("ÌŒu", "Ç”");
		        put("Ì„Ãœ", "Ç•");
		        put("Ì„ÌˆU", "Ç•");
		        put("Ì„Ã¼", "Ç–");
		        put("Ì„Ìˆu", "Ç–");
		        put("Ì?Ãœ", "Ç—");
		        put("Ì?ÌˆU", "Ç—");
		        put("Ì?Ã¼", "Ç˜");
		        put("Ì?Ìˆu", "Ç˜");
		        put("ÌŒÃœ", "Ç™");
		        put("ÌŒÌˆU", "Ç™");
		        put("ÌŒÃ¼", "Çš");
		        put("ÌŒÌˆu", "Çš");
		        put("Ì€Ãœ", "Ç›");
		        put("Ì€ÌˆU", "Ç›");
		        put("Ì€Ã¼", "Çœ");
		        put("Ì€Ìˆu", "Çœ");
		        put("Ì„Ã„", "Çž");
		        put("Ì„ÌˆA", "Çž");
		        put("Ì„Ã¤", "ÇŸ");
		        put("Ì„Ìˆa", "ÇŸ");
		        put("Ì„È¦", "Ç ");
		        put("Ì„Ì‡A", "Ç ");
		        put("Ì„È§", "Ç¡");
		        put("Ì„Ì‡a", "Ç¡");
		        put("Ì„Ã†", "Ç¢");
		        put("Ì„Ã¦", "Ç£");
		        put("ÌŒG", "Ç¦");
		        put("ÌŒg", "Ç§");
		        put("ÌŒK", "Ç¨");
		        put("ÌŒk", "Ç©");
		        put("Ì¨O", "Çª");
		        put("Ì¨o", "Ç«");
		        put("Ì„Çª", "Ç¬");
		        put("Ì„Ì¨O", "Ç¬");
		        put("Ì„Ç«", "Ç­");
		        put("Ì„Ì¨o", "Ç­");
		        put("ÌŒÆ·", "Ç®");
		        put("ÌŒÊ’", "Ç¯");
		        put("ÌŒj", "Ç°");
		        put("Ì?G", "Ç´");
		        put("Ì?g", "Çµ");
		        put("Ì€N", "Ç¸");
		        put("Ì€n", "Ç¹");
		        put("Ì?Ã…", "Çº");
		        put("Ì?ÌŠA", "Çº");
		        put("Ì?Ã¥", "Ç»");
		        put("Ì?ÌŠa", "Ç»");
		        put("Ì?Ã†", "Ç¼");
		        put("Ì?Ã¦", "Ç½");
		        put("Ì?Ã˜", "Ç¾");
		        put("Ì?Ã¸", "Ç¿");
		        put("Ì?A", "È€");
		        put("Ì?a", "È?");
		        put("Ì‘A", "È‚");
		        put("Ì‘a", "Èƒ");
		        put("Ì?E", "È„");
		        put("Ì?e", "È…");
		        put("Ì‘E", "È†");
		        put("Ì‘e", "È‡");
		        put("Ì?I", "Èˆ");
		        put("Ì?i", "È‰");
		        put("Ì‘I", "ÈŠ");
		        put("Ì‘i", "È‹");
		        put("Ì?O", "ÈŒ");
		        put("Ì?o", "È?");
		        put("Ì‘O", "ÈŽ");
		        put("Ì‘o", "È?");
		        put("Ì?R", "È?");
		        put("Ì?r", "È‘");
		        put("Ì‘R", "È’");
		        put("Ì‘r", "È“");
		        put("Ì?U", "È”");
		        put("Ì?u", "È•");
		        put("Ì‘U", "È–");
		        put("Ì‘u", "È—");
		        put("ÌŒH", "Èž");
		        put("ÌŒh", "ÈŸ");
		        put("Ì‡A", "È¦");
		        put("Ì‡a", "È§");
		        put("Ì§E", "È¨");
		        put("Ì§e", "È©");
		        put("Ì„Ã–", "Èª");
		        put("Ì„ÌˆO", "Èª");
		        put("Ì„Ã¶", "È«");
		        put("Ì„Ìˆo", "È«");
		        put("Ì„Ã•", "È¬");
		        put("Ì„ ÌƒO", "È¬");
		        put("Ì„Ãµ", "È­");
		        put("Ì„ Ìƒo", "È­");
		        put("Ì‡O", "È®");
		        put("Ì‡o", "È¯");
		        put("Ì„È®", "È°");
		        put("Ì„Ì‡O", "È°");
		        put("Ì„È¯", "È±");
		        put("Ì„Ì‡o", "È±");
		        put("Ì„Y", "È²");
		        put("Ì„y", "È³");
		        put("Ì¥A", "á¸€");
		        put("Ì¥a", "á¸?");
		        put("Ì‡B", "á¸‚");
		        put("Ì‡b", "á¸ƒ");
		        put("Ì£B", "á¸„");
		        put("Ì£b", "á¸…");
		        put("Ì±B", "á¸†");
		        put("Ì±b", "á¸‡");
		        put("Ì?Ã‡", "á¸ˆ");
		        put("Ì?Ì§C", "á¸ˆ");
		        put("Ì?Ã§", "á¸‰");
		        put("Ì?Ì§c", "á¸‰");
		        put("Ì‡D", "á¸Š");
		        put("Ì‡d", "á¸‹");
		        put("Ì£D", "á¸Œ");
		        put("Ì£d", "á¸?");
		        put("Ì±D", "á¸Ž");
		        put("Ì±d", "á¸?");
		        put("Ì§D", "á¸?");
		        put("Ì§d", "á¸‘");
		        put("Ì­D", "á¸’");
		        put("Ì­d", "á¸“");
		        put("Ì€Ä’", "á¸”");
		        put("Ì€ Ì„E", "á¸”");
		        put("Ì€Ä“", "á¸•");
		        put("Ì€ Ì„e", "á¸•");
		        put("Ì?Ä’", "á¸–");
		        put("Ì? Ì„E", "á¸–");
		        put("Ì?Ä“", "á¸—");
		        put("Ì? Ì„e", "á¸—");
		        put("Ì­E", "á¸˜");
		        put("Ì­e", "á¸™");
		        put("Ì°E", "á¸š");
		        put("Ì°e", "á¸›");
		        put("Ì†È¨", "á¸œ");
		        put("Ì†Ì§E", "á¸œ");
		        put("Ì†È©", "á¸?");
		        put("Ì†Ì§e", "á¸?");
		        put("Ì‡F", "á¸ž");
		        put("Ì‡f", "á¸Ÿ");
		        put("Ì„G", "á¸ ");
		        put("Ì„g", "á¸¡");
		        put("Ì‡H", "á¸¢");
		        put("Ì‡h", "á¸£");
		        put("Ì£H", "á¸¤");
		        put("Ì£h", "á¸¥");
		        put("ÌˆH", "á¸¦");
		        put("Ìˆh", "á¸§");
		        put("Ì§H", "á¸¨");
		        put("Ì§h", "á¸©");
		        put("Ì®H", "á¸ª");
		        put("Ì®h", "á¸«");
		        put("Ì°I", "á¸¬");
		        put("Ì°i", "á¸­");
		        put("Ì?Ã?", "á¸®");
		        put("Ì?ÌˆI", "á¸®");
		        put("Ì?Ã¯", "á¸¯");
		        put("Ì?Ìˆi", "á¸¯");
		        put("Ì?K", "á¸°");
		        put("Ì?k", "á¸±");
		        put("Ì£K", "á¸²");
		        put("Ì£k", "á¸³");
		        put("Ì±K", "á¸´");
		        put("Ì±k", "á¸µ");
		        put("Ì£L", "á¸¶");
		        put("Ì£l", "á¸·");
		        put("Ì„á¸¶", "á¸¸");
		        put("Ì„Ì£L", "á¸¸");
		        put("Ì„á¸·", "á¸¹");
		        put("Ì„Ì£l", "á¸¹");
		        put("Ì±L", "á¸º");
		        put("Ì±l", "á¸»");
		        put("Ì­L", "á¸¼");
		        put("Ì­l", "á¸½");
		        put("Ì?M", "á¸¾");
		        put("Ì?m", "á¸¿");
		        put("Ì‡M", "á¹€");
		        put("Ì‡m", "á¹?");
		        put("Ì£M", "á¹‚");
		        put("Ì£m", "á¹ƒ");
		        put("Ì‡N", "á¹„");
		        put("Ì‡n", "á¹…");
		        put("Ì£N", "á¹†");
		        put("Ì£n", "á¹‡");
		        put("Ì±N", "á¹ˆ");
		        put("Ì±n", "á¹‰");
		        put("Ì­N", "á¹Š");
		        put("Ì­n", "á¹‹");
		        put("Ì?Ã•", "á¹Œ");
		        put("Ì? ÌƒO", "á¹Œ");
		        put("Ì?Ãµ", "á¹?");
		        put("Ì? Ìƒo", "á¹?");
		        put("ÌˆÃ•", "á¹Ž");
		        put("Ìˆ ÌƒO", "á¹Ž");
		        put("ÌˆÃµ", "á¹?");
		        put("Ìˆ Ìƒo", "á¹?");
		        put("Ì€ÅŒ", "á¹?");
		        put("Ì€ Ì„O", "á¹?");
		        put("Ì€Å?", "á¹‘");
		        put("Ì€ Ì„o", "á¹‘");
		        put("Ì?ÅŒ", "á¹’");
		        put("Ì? Ì„O", "á¹’");
		        put("Ì?Å?", "á¹“");
		        put("Ì? Ì„o", "á¹“");
		        put("Ì?P", "á¹”");
		        put("Ì?p", "á¹•");
		        put("Ì‡P", "á¹–");
		        put("Ì‡p", "á¹—");
		        put("Ì‡R", "á¹˜");
		        put("Ì‡r", "á¹™");
		        put("Ì£R", "á¹š");
		        put("Ì£r", "á¹›");
		        put("Ì„á¹š", "á¹œ");
		        put("Ì„Ì£R", "á¹œ");
		        put("Ì„á¹›", "á¹?");
		        put("Ì„Ì£r", "á¹?");
		        put("Ì±R", "á¹ž");
		        put("Ì±r", "á¹Ÿ");
		        put("Ì‡S", "á¹ ");
		        put("Ì‡s", "á¹¡");
		        put("Ì£S", "á¹¢");
		        put("Ì£s", "á¹£");
		        put("Ì‡Åš", "á¹¤");
		        put("Ì‡ Ì?S", "á¹¤");
		        put("Ì‡Å›", "á¹¥");
		        put("Ì‡ Ì?s", "á¹¥");
		        put("Ì‡Å ", "á¹¦");
		        put("Ì‡ÌŒS", "á¹¦");
		        put("Ì‡Å¡", "á¹§");
		        put("Ì‡ÌŒs", "á¹§");
		        put("Ì‡á¹¢", "á¹¨");
		        put("Ì‡Ì£S", "á¹¨");
		        put("Ì‡á¹£", "á¹©");
		        put("Ì‡Ì£s", "á¹©");
		        put("Ì‡T", "á¹ª");
		        put("Ì‡t", "á¹«");
		        put("Ì£T", "á¹¬");
		        put("Ì£t", "á¹­");
		        put("Ì±T", "á¹®");
		        put("Ì±t", "á¹¯");
		        put("Ì­T", "á¹°");
		        put("Ì­t", "á¹±");
		        put("Ì¤U", "á¹²");
		        put("Ì¤u", "á¹³");
		        put("Ì°U", "á¹´");
		        put("Ì°u", "á¹µ");
		        put("Ì­U", "á¹¶");
		        put("Ì­u", "á¹·");
		        put("Ì?Å¨", "á¹¸");
		        put("Ì? ÌƒU", "á¹¸");
		        put("Ì?Å©", "á¹¹");
		        put("Ì? Ìƒu", "á¹¹");
		        put("ÌˆÅª", "á¹º");
		        put("Ìˆ Ì„U", "á¹º");
		        put("ÌˆÅ«", "á¹»");
		        put("Ìˆ Ì„u", "á¹»");
		        put("ÌƒV", "á¹¼");
		        put("Ìƒv", "á¹½");
		        put("Ì£V", "á¹¾");
		        put("Ì£v", "á¹¿");
		        put("Ì€W", "áº€");
		        put("Ì€w", "áº?");
		        put("Ì?W", "áº‚");
		        put("Ì?w", "áºƒ");
		        put("ÌˆW", "áº„");
		        put("Ìˆw", "áº…");
		        put("Ì‡W", "áº†");
		        put("Ì‡w", "áº‡");
		        put("Ì£W", "áºˆ");
		        put("Ì£w", "áº‰");
		        put("Ì‡X", "áºŠ");
		        put("Ì‡x", "áº‹");
		        put("ÌˆX", "áºŒ");
		        put("Ìˆx", "áº?");
		        put("Ì‡Y", "áºŽ");
		        put("Ì‡y", "áº?");
		        put("Ì‚Z", "áº?");
		        put("Ì‚z", "áº‘");
		        put("Ì£Z", "áº’");
		        put("Ì£z", "áº“");
		        put("Ì±Z", "áº”");
		        put("Ì±z", "áº•");
		        put("Ì±h", "áº–");
		        put("Ìˆt", "áº—");
		        put("ÌŠw", "áº˜");
		        put("ÌŠy", "áº™");
		        put("Ì‡Å¿", "áº›");
		        put("Ì£A", "áº ");
		        put("Ì£a", "áº¡");
		        put("Ì‰A", "áº¢");
		        put("Ì‰a", "áº£");
		        put("Ì?Ã‚", "áº¤");
		        put("Ì? Ì‚A", "áº¤");
		        put("Ì?Ã¢", "áº¥");
		        put("Ì? Ì‚a", "áº¥");
		        put("Ì€Ã‚", "áº¦");
		        put("Ì€ Ì‚A", "áº¦");
		        put("Ì€Ã¢", "áº§");
		        put("Ì€ Ì‚a", "áº§");
		        put("Ì‰Ã‚", "áº¨");
		        put("Ì‰ Ì‚A", "áº¨");
		        put("Ì‰Ã¢", "áº©");
		        put("Ì‰ Ì‚a", "áº©");
		        put("ÌƒÃ‚", "áºª");
		        put("Ìƒ Ì‚A", "áºª");
		        put("ÌƒÃ¢", "áº«");
		        put("Ìƒ Ì‚a", "áº«");
		        put("Ì‚áº ", "áº¬");
		        put("Ì‚Ì£A", "áº¬");
		        put("Ì£Ã‚", "áº¬");
		        put("Ì‚áº¡", "áº­");
		        put("Ì‚Ì£a", "áº­");
		        put("Ì£Ã¢", "áº­");
		        put("Ì?Ä‚", "áº®");
		        put("Ì?Ì†A", "áº®");
		        put("Ì?Äƒ", "áº¯");
		        put("Ì?Ì†a", "áº¯");
		        put("Ì€Ä‚", "áº°");
		        put("Ì€Ì†A", "áº°");
		        put("Ì€Äƒ", "áº±");
		        put("Ì€Ì†a", "áº±");
		        put("Ì‰Ä‚", "áº²");
		        put("Ì‰Ì†A", "áº²");
		        put("Ì‰Äƒ", "áº³");
		        put("Ì‰Ì†a", "áº³");
		        put("ÌƒÄ‚", "áº´");
		        put("ÌƒÌ†A", "áº´");
		        put("ÌƒÄƒ", "áºµ");
		        put("ÌƒÌ†a", "áºµ");
		        put("Ì†áº ", "áº¶");
		        put("Ì†Ì£A", "áº¶");
		        put("Ì£Ä‚", "áº¶");
		        put("Ì†áº¡", "áº·");
		        put("Ì†Ì£a", "áº·");
		        put("Ì£Äƒ", "áº·");
		        put("Ì£E", "áº¸");
		        put("Ì£e", "áº¹");
		        put("Ì‰E", "áºº");
		        put("Ì‰e", "áº»");
		        put("ÌƒE", "áº¼");
		        put("Ìƒe", "áº½");
		        put("Ì?ÃŠ", "áº¾");
		        put("Ì? Ì‚E", "áº¾");
		        put("Ì?Ãª", "áº¿");
		        put("Ì? Ì‚e", "áº¿");
		        put("Ì€ÃŠ", "á»€");
		        put("Ì€ Ì‚E", "á»€");
		        put("Ì€Ãª", "á»?");
		        put("Ì€ Ì‚e", "á»?");
		        put("Ì‰ÃŠ", "á»‚");
		        put("Ì‰ Ì‚E", "á»‚");
		        put("Ì‰Ãª", "á»ƒ");
		        put("Ì‰ Ì‚e", "á»ƒ");
		        put("ÌƒÃŠ", "á»„");
		        put("Ìƒ Ì‚E", "á»„");
		        put("ÌƒÃª", "á»…");
		        put("Ìƒ Ì‚e", "á»…");
		        put("Ì‚áº¸", "á»†");
		        put("Ì‚Ì£E", "á»†");
		        put("Ì£ÃŠ", "á»†");
		        put("Ì‚áº¹", "á»‡");
		        put("Ì‚Ì£e", "á»‡");
		        put("Ì£Ãª", "á»‡");
		        put("Ì‰I", "á»ˆ");
		        put("Ì‰i", "á»‰");
		        put("Ì£I", "á»Š");
		        put("Ì£i", "á»‹");
		        put("Ì£O", "á»Œ");
		        put("Ì£o", "á»?");
		        put("Ì‰O", "á»Ž");
		        put("Ì‰o", "á»?");
		        put("Ì?Ã”", "á»?");
		        put("Ì? Ì‚O", "á»?");
		        put("Ì?Ã´", "á»‘");
		        put("Ì? Ì‚o", "á»‘");
		        put("Ì€Ã”", "á»’");
		        put("Ì€ Ì‚O", "á»’");
		        put("Ì€Ã´", "á»“");
		        put("Ì€ Ì‚o", "á»“");
		        put("Ì‰Ã”", "á»”");
		        put("Ì‰ Ì‚O", "á»”");
		        put("Ì‰Ã´", "á»•");
		        put("Ì‰ Ì‚o", "á»•");
		        put("ÌƒÃ”", "á»–");
		        put("Ìƒ Ì‚O", "á»–");
		        put("ÌƒÃ´", "á»—");
		        put("Ìƒ Ì‚o", "á»—");
		        put("Ì‚á»Œ", "á»˜");
		        put("Ì‚Ì£O", "á»˜");
		        put("Ì£Ã”", "á»˜");
		        put("Ì‚á»?", "á»™");
		        put("Ì‚Ì£o", "á»™");
		        put("Ì£Ã´", "á»™");
		        put("Ì?Æ ", "á»š");
		        put("Ì?Ì›O", "á»š");
		        put("Ì?Æ¡", "á»›");
		        put("Ì?Ì›o", "á»›");
		        put("Ì€Æ ", "á»œ");
		        put("Ì€Ì›O", "á»œ");
		        put("Ì€Æ¡", "á»?");
		        put("Ì€Ì›o", "á»?");
		        put("Ì‰Æ ", "á»ž");
		        put("Ì‰Ì›O", "á»ž");
		        put("Ì‰Æ¡", "á»Ÿ");
		        put("Ì‰Ì›o", "á»Ÿ");
		        put("ÌƒÆ ", "á» ");
		        put("ÌƒÌ›O", "á» ");
		        put("ÌƒÆ¡", "á»¡");
		        put("ÌƒÌ›o", "á»¡");
		        put("Ì£Æ ", "á»¢");
		        put("Ì£Ì›O", "á»¢");
		        put("Ì£Æ¡", "á»£");
		        put("Ì£Ì›o", "á»£");
		        put("Ì£U", "á»¤");
		        put("Ì£u", "á»¥");
		        put("Ì‰U", "á»¦");
		        put("Ì‰u", "á»§");
		        put("Ì?Æ¯", "á»¨");
		        put("Ì?Ì›U", "á»¨");
		        put("Ì?Æ°", "á»©");
		        put("Ì?Ì›u", "á»©");
		        put("Ì€Æ¯", "á»ª");
		        put("Ì€Ì›U", "á»ª");
		        put("Ì€Æ°", "á»«");
		        put("Ì€Ì›u", "á»«");
		        put("Ì‰Æ¯", "á»¬");
		        put("Ì‰Ì›U", "á»¬");
		        put("Ì‰Æ°", "á»­");
		        put("Ì‰Ì›u", "á»­");
		        put("ÌƒÆ¯", "á»®");
		        put("ÌƒÌ›U", "á»®");
		        put("ÌƒÆ°", "á»¯");
		        put("ÌƒÌ›u", "á»¯");
		        put("Ì£Æ¯", "á»°");
		        put("Ì£Ì›U", "á»°");
		        put("Ì£Æ°", "á»±");
		        put("Ì£Ì›u", "á»±");
		        put("Ì€Y", "á»²");
		        put("Ì€y", "á»³");
		        put("Ì£Y", "á»´");
		        put("Ì£y", "á»µ");
		        put("Ì‰Y", "á»¶");
		        put("Ì‰y", "á»·");
		        put("ÌƒY", "á»¸");
		        put("Ìƒy", "á»¹");
		// include?
		        put("Ì‚0", "â?°");
		        put("Ì‚4", "â?´");
		        put("Ì‚5", "â?µ");
		        put("Ì‚6", "â?¶");
		        put("Ì‚7", "â?·");
		        put("Ì‚8", "â?¸");
		        put("Ì‚9", "â?¹");
		        put("Ì‚+", "â?º");
		        put("Ì‚âˆ’", "â?»");
		        put("Ì‚=", "â?¼");
		        put("Ì‚(", "â?½");
		        put("Ì‚)", "â?¾");
		        put("Ì£+", "â¨¥");
		        put("Ì°+", "â¨¦");
		        put("Ì£-", "â¨ª");
		        put("Ì£=", "â©¦");
		        put("ÌˆÌ¤=", "â©·");
		        put("Ì¤Ìˆ=", "â©·");
		// include end?
		        put("Ì¥|", "â«°");
		        put("Ì‡Ä€", "Ç ");
		        put("Ì‡Ä?", "Ç¡");
		        put("Ì‡j", "È·");
		        put("Ì‡L", "Ä¿");
		        put("Ì‡l", "Å€");
		        put("Ì‡ÅŒ", "È°");
		        put("Ì‡Å?", "È±");
		        put("Ì?á¹ ", "á¹¤");
		        put("Ì?á¹¡", "á¹¥");
		        put("Ì?V", "Ç—");
		        put("Ì?v", "Ç˜");
		        put("Ì£á¹ ", "á¹¨");
		        put("Ì£á¹¡", "á¹©");
		        put("Ì£Ì£", "Ì£");
		        put("Ì£ ", "Ì£");
		        put("Ì†Ã?", "áº®");
		        put("Ì†Ã€", "áº°");
		        put("Ì†áº¢", "áº²");
		        put("Ì†Ãƒ", "áº´");
		        put("Ì†a", "áº¯");
		        put("Ì†Ã ", "áº±");
		        put("Ì†áº£", "áº³");
		        put("Ì†Ã£", "áºµ");
		// include?
		        put("ÌŒ(", "â‚?");
		        put("ÌŒ)", "â‚Ž");
		        put("ÌŒ+", "â‚Š");
		        put("ÌŒ-", "â‚‹");
		        put("ÌŒ0", "â‚€");
		        put("ÌŒ1", "â‚?");
		        put("ÌŒ2", "â‚‚");
		        put("ÌŒ3", "â‚ƒ");
		        put("ÌŒ4", "â‚„");
		        put("ÌŒ5", "â‚…");
		        put("ÌŒ6", "â‚†");
		        put("ÌŒ7", "â‚‡");
		        put("ÌŒ8", "â‚ˆ");
		        put("ÌŒ9", "â‚‰");
		        put("ÌŒ=", "â‚Œ");
		// include end?
		        put("ÌŒÇ²", "Ç…");
		        put("ÌŒá¹ ", "á¹¦");
		        put("ÌŒá¹¡", "á¹§");
		        put("ÌŒV", "Ç™");
		        put("ÌŒv", "Çš");
		        put("Ì§C", "á¸ˆ");
		        put("Ì§c", "á¸‰");
		        put("Ì§Â¢", "â‚µ");
		        put("Ì§Ä”", "á¸œ");
		        put("Ì§Ä•", "á¸?");
		        put("Ì‚-", "â?»");
		        put("Ì‚Ã?", "áº¤");
		        put("Ì‚Ã€", "áº¦");
		        put("Ì‚áº¢", "áº¨");
		        put("Ì‚Ãƒ", "áºª");
		        put("Ì‚Ã¡", "áº¥");
		        put("Ì‚Ã ", "áº§");
		        put("Ì‚áº£", "áº©");
		        put("Ì‚Ã£", "áº«");
		        put("Ì‚Ã‰", "áº¾");
		        put("Ì‚Ãˆ", "á»€");
		        put("Ì‚áºº", "á»‚");
		        put("Ì‚áº¼", "á»„");
		        put("Ì‚Ã©", "áº¿");
		        put("Ì‚Ã¨", "á»?");
		        put("Ì‚áº»", "á»ƒ");
		        put("Ì‚áº½", "á»…");
		        put("Ì‚Ã“", "á»?");
		        put("Ì‚Ã’", "á»’");
		        put("Ì‚á»Ž", "á»”");
		        put("Ì‚Ã•", "á»–");
		        put("Ì‚Ã³", "á»‘");
		        put("Ì‚Ã²", "á»“");
		        put("Ì‚á»?", "á»•");
		        put("Ì‚Ãµ", "á»—");
		        put("Ì¦S", "È˜");
		        put("Ì¦s", "È™");
		        put("Ì¦T", "Èš");
		        put("Ì¦t", "È›");
		        put("Ì¦Ì¦", ",");
		        put("Ì¦ ", ",");
		        put("ÌˆÄ€", "Çž");
		        put("ÌˆÄ?", "ÇŸ");
		        put("ÌˆÃ?", "á¸®");
		        put("ÌˆÃ­", "á¸¯");
		        put("ÌˆÅŒ", "Èª");
		        put("ÌˆÅ?", "È«");
		        put("ÌˆÃš", "Ç—");
		        put("ÌˆÇ“", "Ç™");
		        put("ÌˆÃ™", "Ç›");
		        put("ÌˆÃº", "Ç˜");
		        put("ÌˆÇ”", "Çš");
		        put("ÌˆÃ¹", "Çœ");
		        put("Ì€V", "Ç›");
		        put("Ì€v", "Çœ");
		        put("Ì‰B", "Æ?");
		        put("Ì‰b", "É“");
		        put("Ì‰C", "Æ‡");
		        put("Ì‰c", "Æˆ");
		        put("Ì‰D", "ÆŠ");
		        put("Ì‰d", "É—");
		        put("Ì‰É–", "á¶‘");
		        put("Ì‰F", "Æ‘");
		        put("Ì‰f", "Æ’");
		        put("Ì‰G", "Æ“");
		        put("Ì‰g", "É ");
		        put("Ì‰h", "É¦");
		        put("Ì‰ÉŸ", "Ê„");
		        put("Ì‰K", "Æ˜");
		        put("Ì‰k", "Æ™");
		        put("Ì‰M", "â±®");
		        put("Ì‰m", "É±");
		        put("Ì‰N", "Æ?");
		        put("Ì‰n", "É²");
		        put("Ì‰P", "Æ¤");
		        put("Ì‰p", "Æ¥");
		        put("Ì‰q", "Ê ");
		        put("Ì‰Éœ", "É?");
		        put("Ì‰s", "Ê‚");
		        put("Ì‰É™", "Éš");
		        put("Ì‰T", "Æ¬");
		        put("Ì‰t", "Æ­");
		        put("Ì‰É¹", "É»");
		        put("Ì‰V", "Æ²");
		        put("Ì‰v", "Ê‹");
		        put("Ì‰W", "â±²");
		        put("Ì‰w", "â±³");
		        put("Ì‰Z", "È¤");
		        put("Ì‰z", "È¥");
		        put("Ì‰Ì‰", "Ì‰");
		        put("Ì‰ ", "Ì‰");
		        put("Ì›Ã“", "á»š");
		        put("Ì›O", "á»¢");
		        put("Ì›Ã’", "á»œ");
		        put("Ì›á»Ž", "á»ž");
		        put("Ì›Ã•", "á» ");
		        put("Ì›Ã³", "á»›");
		        put("Ì›á»?", "á»£");
		        put("Ì›Ã²", "á»?");
		        put("Ì›á»?", "á»Ÿ");
		        put("Ì›Ãµ", "á»¡");
		        put("Ì›Ãš", "á»¨");
		        put("Ì›á»¤", "á»°");
		        put("Ì›Ã™", "á»ª");
		        put("Ì›á»¦", "á»¬");
		        put("Ì›Å¨", "á»®");
		        put("Ì›Ãº", "á»©");
		        put("Ì›á»¥", "á»±");
		        put("Ì›Ã¹", "á»«");
		        put("Ì›á»§", "á»­");
		        put("Ì›Å©", "á»¯");
		        put("Ì›Ì›", "Ì›");
		        put("Ì› ", "Ì›");
		        put("Ì„Ã‰", "á¸–");
		        put("Ì„Ãˆ", "á¸”");
		        put("Ì„Ã©", "á¸—");
		        put("Ì„Ã¨", "á¸•");
		        put("Ì„Ã“", "á¹’");
		        put("Ì„Ã’", "á¹?");
		        put("Ì„Ã³", "á¹“");
		        put("Ì„Ã²", "á¹‘");
		        put("Ì„V", "Ç•");
		        put("Ì„v", "Ç–");
		        put("Ì¨ÅŒ", "Ç¬");
		        put("Ì¨Å?", "Ç­");
		        put("ÌŠÃ?", "Çº");
		        put("ÌŠÃ¡", "Ç»");
		        put("ÌƒÃ“", "á¹Œ");
		        put("ÌƒÃ–", "á¹Ž");
		        put("ÌƒÅŒ", "È¬");
		        put("ÌƒÃ³", "á¹?");
		        put("ÌƒÃ¶", "á¹?");
		        put("ÌƒÅ?", "È­");
		        put("ÌƒÃš", "á¹¸");
		        put("ÌƒÃº", "á¹¹");
		        put("Ìƒ=", "â‰ƒ");
		        put("Ìƒ<", "â‰²");
		        put("Ìƒ>", "â‰³");
		        put("Ì?Ì‡S", "á¹¤");
		        put("Ì?Ì‡s", "á¹¥");
		        put("Ì£Ì‡S", "á¹¨");
		        put("Ì£Ì‡s", "á¹©");
		        put("ÌŒÌ‡S", "á¹¦");
		        put("ÌŒÌ‡s", "á¹§");
		        put("Ì‡ Ì„A", "Ç ");
		        put("Ì‡ Ì„a", "Ç¡");
		        put("Ì‡ Ì„O", "È°");
		        put("Ì‡ Ì„o", "È±");
		        put("Ì† Ì?A", "áº®");
		        put("Ì† Ì?a", "áº¯");
		        put("Ì§ Ì?C", "á¸ˆ");
		        put("Ì§ Ì?c", "á¸‰");
		        put("Ì‚ Ì?A", "áº¤");
		        put("Ì‚ Ì?a", "áº¥");
		        put("Ì‚ Ì?E", "áº¾");
		        put("Ì‚ Ì?e", "áº¿");
		        put("Ì‚ Ì?O", "á»?");
		        put("Ì‚ Ì?o", "á»‘");
		        put("Ìˆ Ì?I", "á¸®");
		        put("Ìˆ Ì?i", "á¸¯");
		        put("Ìˆ Ì?U", "Ç—");
		        put("Ìˆ Ì?u", "Ç˜");
		        put("Ì› Ì?O", "á»š");
		        put("Ì› Ì?o", "á»›");
		        put("Ì› Ì?U", "á»¨");
		        put("Ì› Ì?u", "á»©");
		        put("Ì„ Ì?E", "á¸–");
		        put("Ì„ Ì?e", "á¸—");
		        put("Ì„ Ì?O", "á¹’");
		        put("Ì„ Ì?o", "á¹“");
		        put("ÌŠ Ì?A", "Çº");
		        put("ÌŠ Ì?a", "Ç»");
		        put("Ìƒ Ì?O", "á¹Œ");
		        put("Ìƒ Ì?o", "á¹?");
		        put("Ìƒ Ì?U", "á¹¸");
		        put("Ìƒ Ì?u", "á¹¹");
		        put("Ì£Ì†A", "áº¶");
		        put("Ì£Ì†a", "áº·");
		        put("Ì£ Ì‚A", "áº¬");
		        put("Ì£ Ì‚a", "áº­");
		        put("Ì£ Ì‚E", "á»†");
		        put("Ì£ Ì‚e", "á»‡");
		        put("Ì£ Ì‚O", "á»˜");
		        put("Ì£ Ì‚o", "á»™");
		        put("Ì›Ì£O", "á»¢");
		        put("Ì›Ì£o", "á»£");
		        put("Ì›Ì£U", "á»°");
		        put("Ì›Ì£u", "á»±");
		        put("Ì£ Ì„L", "á¸¸");
		        put("Ì£ Ì„l", "á¸¹");
		        put("Ì£ Ì„R", "á¹œ");
		        put("Ì£ Ì„r", "á¹?");
		        put("Ì§Ì†E", "á¸œ");
		        put("Ì§Ì†e", "á¸?");
		        put("Ì† Ì€A", "áº°");
		        put("Ì† Ì€a", "áº±");
		        put("Ì†Ì‰A", "áº²");
		        put("Ì†Ì‰a", "áº³");
		        put("Ì† ÌƒA", "áº´");
		        put("Ì† Ìƒa", "áºµ");
		        put("ÌˆÌŒU", "Ç™");
		        put("ÌˆÌŒu", "Çš");
		        put("Ì‚ Ì€A", "áº¦");
		        put("Ì‚ Ì€a", "áº§");
		        put("Ì‚ Ì€E", "á»€");
		        put("Ì‚ Ì€e", "á»?");
		        put("Ì‚ Ì€O", "á»’");
		        put("Ì‚ Ì€o", "á»“");
		        put("Ì‚Ì‰A", "áº¨");
		        put("Ì‚Ì‰a", "áº©");
		        put("Ì‚Ì‰E", "á»‚");
		        put("Ì‚Ì‰e", "á»ƒ");
		        put("Ì‚Ì‰O", "á»”");
		        put("Ì‚Ì‰o", "á»•");
		        put("Ì‚ ÌƒA", "áºª");
		        put("Ì‚ Ìƒa", "áº«");
		        put("Ì‚ ÌƒE", "á»„");
		        put("Ì‚ Ìƒe", "á»…");
		        put("Ì‚ ÌƒO", "á»–");
		        put("Ì‚ Ìƒo", "á»—");
		        put("Ìˆ Ì€U", "Ç›");
		        put("Ìˆ Ì€u", "Çœ");
		        put("Ìˆ Ì„A", "Çž");
		        put("Ìˆ Ì„a", "ÇŸ");
		        put("Ìˆ Ì„O", "Èª");
		        put("Ìˆ Ì„o", "È«");
		        put("ÌƒÌˆO", "á¹Ž");
		        put("ÌƒÌˆo", "á¹?");
		        put("Ì› Ì€O", "á»œ");
		        put("Ì› Ì€o", "á»?");
		        put("Ì› Ì€U", "á»ª");
		        put("Ì› Ì€u", "á»«");
		        put("Ì„ Ì€E", "á¸”");
		        put("Ì„ Ì€e", "á¸•");
		        put("Ì„ Ì€O", "á¹?");
		        put("Ì„ Ì€o", "á¹‘");
		        put("Ì›Ì‰O", "á»ž");
		        put("Ì›Ì‰o", "á»Ÿ");
		        put("Ì›Ì‰U", "á»¬");
		        put("Ì›Ì‰u", "á»­");
		        put("Ì› ÌƒO", "á» ");
		        put("Ì› Ìƒo", "á»¡");
		        put("Ì› ÌƒU", "á»®");
		        put("Ì› Ìƒu", "á»¯");
		        put("Ì¨ Ì„O", "Ç¬");
		        put("Ì¨ Ì„o", "Ç­");
		        put("Ìƒ Ì„O", "È¬");
		        put("Ìƒ Ì„o", "È­");
		*/
	}

	public static String normalize(String input) {
		String lookup = mMap.get(input);
		if (lookup != null)
			return lookup;
		return Normalizer.normalize(input, Normalizer.Form.NFC);
	}

	public boolean execute(int code) {
		String composed = executeToString(code);
		if (composed != null) {
			// Log.i(TAG, "composed=" + composed + " len=" + composed.length());
			if (composed.equals("")) {
				// Unrecognised - try to use the built-in Java text normalisation
				int c = composeBuffer.codePointAt(composeBuffer.length() - 1);
				if (Character.getType(c) != Character.NON_SPACING_MARK) {
					// Put the combining character(s) at the end, else this won't work
					composeBuffer.reverse();
					composed = Normalizer.normalize(composeBuffer.toString(), Normalizer.Form.NFC);
					if (composed.equals("")) {
						return true; // incomplete :-)
					}
				} else {
					return true; // there may be multiple combining accents
				}
			}

			clear();
			composeUser.onText(composed);
			return false;
		}
		return true;
	}
}
